{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"Agentform <p>Define AI agent systems declaratively.Infrastructure as Code for the AI Era.</p> Get Started View Examples <ul> <li> <p> Native Schema     Define complex agent behaviors, workflows, and policies in a type-safe, readable <code>.af</code> syntax.</p> </li> <li> <p> Multi-Provider     Seamlessly switch between OpenAI, Anthropic, and open-source models without rewriting code.</p> </li> <li> <p> MCP First     First-class support for the Model Context Protocol to connect agents with your data and tools.</p> </li> <li> <p> Enterprise Safety     Enforce granular policies, budget limits, and human-in-the-loop approval gates.</p> </li> <li> <p> Full Observability     Trace every step of your agent's execution with built-in logging and debugging tools.</p> </li> <li> <p> Modular &amp; Reusable     Share agent configurations via Git-based modules, just like Terraform.</p> </li> </ul>"},{"location":"#how-it-works","title":"How It Works","text":"Agentform Architecture Diagram A flowchart showing the process flow from User Request to Form Controller, Router, splitting to Action Agent or Planning Agent, and converging to a Result. User Request Form Controller Router Action Agent Planning Agent Result"},{"location":"#deploy-in-seconds","title":"Deploy in Seconds","text":"$ agentform init my-agent Created my-agent.af in ./my-agent $ agentform deploy &gt; Validating schema... OK &gt; Provisioning resources... Done &gt; Syncing to edge... Success \u279c Agent live at https://api.agentform.com/v1/agents/my-agent $"},{"location":"#code-that-speaks-your-language","title":"Code that speaks your language","text":"Agentform DSLJSON SchemaPython SDK (Coming Soon) <pre><code>agent \"researcher\" {\n  model = \"gpt-4-turbo\"\n  temperature = 0.7\n\n  system_prompt = \"You are a senior research analyst.\"\n\n  tools = [\n    \"web_search\",\n    \"summarize_page\"\n  ]\n\n  limits {\n    budget = \"5.00\"\n    max_steps = 10\n  }\n}\n</code></pre> <pre><code>{\n  \"name\": \"researcher\",\n  \"model\": \"gpt-4-turbo\",\n  \"temperature\": 0.7,\n  \"system_prompt\": \"You are a senior research analyst.\",\n  \"tools\": [\n    \"web_search\", \n    \"summarize_page\"\n  ],\n  \"limits\": {\n    \"budget\": \"5.00\",\n    \"max_steps\": 10\n  }\n}\n</code></pre> <pre><code># Planned Python SDK example.\n# The agentform Python package and Agent class are not yet available.\n# This example illustrates the intended future interface.\n#\n# from agentform import Agent\n#\n# researcher = Agent(\n#     name=\"researcher\",\n#     model=\"gpt-4-turbo\",\n#     temperature=0.7,\n#     system_prompt=\"You are a senior research analyst.\",\n#     tools=[\"web_search\", \"summarize_page\"],\n#     limits={\n#         \"budget\": \"5.00\",\n#         \"max_steps\": 10\n#     }\n# )\n</code></pre>"},{"location":"contributing/","title":"Contributing","text":"<p>We welcome contributions to Agentform!</p>"},{"location":"contributing/#development-setup","title":"Development Setup","text":"<ol> <li>Clone the repository</li> <li>Install dependencies with Poetry</li> <li>Run tests</li> </ol>"},{"location":"contributing/#documentation","title":"Documentation","text":"<p>The documentation is built with MkDocs and Material for MkDocs.</p> <p>To run the docs locally:</p> <pre><code>pip install mkdocs mkdocs-material\nmkdocs serve\n</code></pre>"},{"location":"examples/","title":"Agentform Examples","text":"<p>The <code>examples/</code> directory contains ready-to-use configurations demonstrating various Agentform features. Each example includes detailed documentation explaining the concepts it covers.</p>"},{"location":"examples/#examples-overview","title":"Examples Overview","text":"Example Difficulty Description Simple Agent Beginner Basic LLM agent answering questions Multi-Agent Intermediate Multiple agents with conditional routing Filesystem Agent Intermediate File operations via MCP server PR Reviewer Advanced GitHub PR reviews with human approval"},{"location":"examples/#simple-agent","title":"Simple Agent","text":"<p>Directory: <code>simple-agent/</code></p> <p>The simplest possible Agentform configuration. A single agent that answers questions using OpenAI.</p>"},{"location":"examples/#what-youll-learn","title":"What You'll Learn","text":"<ul> <li>Basic Agentform file structure with numbered prefixes</li> <li>Defining variables, providers, and models</li> <li>Creating an agent with instructions</li> <li>Building a simple workflow</li> </ul>"},{"location":"examples/#features-used","title":"Features Used","text":"<ul> <li>Variables with <code>sensitive = true</code></li> <li>LLM provider configuration</li> <li>Policy budgets (cost and timeout)</li> <li>Fallback models</li> <li>Single-step LLM workflow</li> </ul>"},{"location":"examples/#run-it","title":"Run It","text":"<pre><code>cd examples/simple-agent\nagentform run ask --var openai_api_key=$OPENAI_API_KEY --input '{\"question\": \"What is Agentform\u2122?\"}'\n</code></pre>"},{"location":"examples/#multi-agent","title":"Multi-Agent","text":"<p>Directory: <code>multi-agent/</code></p> <p>Multiple specialized agents working together with intelligent task routing.</p>"},{"location":"examples/#what-youll-learn_1","title":"What You'll Learn","text":"<ul> <li>Using multiple LLM providers (OpenAI + Anthropic)</li> <li>Creating specialized agents for different tasks</li> <li>Conditional workflow routing based on classification</li> <li>Differentiated policies for fast vs. thorough processing</li> </ul>"},{"location":"examples/#features-used_1","title":"Features Used","text":"<ul> <li>Multiple providers (OpenAI and Anthropic)</li> <li>Multiple models across providers</li> <li>Different policies (<code>fast</code> vs <code>thorough</code>)</li> <li>Classifier agent for task routing</li> <li>Conditional steps (<code>type = \"condition\"</code>)</li> <li>State passing between steps</li> </ul>"},{"location":"examples/#run-it_1","title":"Run It","text":"<pre><code>cd examples/multi-agent\n\n# Simple task \u2192 quick_responder (GPT-4o)\nagentform run smart_respond \\\n  --var openai_api_key=$OPENAI_API_KEY \\\n  --var anthropic_api_key=$ANTHROPIC_API_KEY \\\n  --input '{\"task\": \"What is 2+2?\"}'\n\n# Complex task \u2192 deep_analyst (Claude)\nagentform run smart_respond \\\n  --var openai_api_key=$OPENAI_API_KEY \\\n  --var anthropic_api_key=$ANTHROPIC_API_KEY \\\n  --input '{\"task\": \"Analyze the impact of AI on employment\"}'\n</code></pre>"},{"location":"examples/#filesystem-agent","title":"Filesystem Agent","text":"<p>Directory: <code>filesystem-agent/</code></p> <p>An agent that interacts with the filesystem via MCP (Model Context Protocol) server.</p>"},{"location":"examples/#what-youll-learn_2","title":"What You'll Learn","text":"<ul> <li>Integrating MCP servers for external capabilities</li> <li>Defining capabilities from server methods</li> <li>Using <code>call</code> steps to invoke capabilities</li> <li>Human approval for write operations</li> <li>Capability call budgets</li> </ul>"},{"location":"examples/#features-used_2","title":"Features Used","text":"<ul> <li>MCP server configuration (<code>server</code> block)</li> <li>Capability definitions with side effects</li> <li><code>requires_approval = true</code> for sensitive operations</li> <li><code>type = \"call\"</code> workflow steps</li> <li><code>max_capability_calls</code> budget</li> <li>Multiple workflows in one project</li> </ul>"},{"location":"examples/#run-it_2","title":"Run It","text":"<pre><code>cd examples/filesystem-agent\n\n# Read and summarize a file\nagentform run read_and_summarize \\\n  --var openai_api_key=$OPENAI_API_KEY \\\n  --input '{\"file_path\": \"article.txt\", \"task\": \"Summarize this\"}'\n\n# List directory contents\nagentform run list_and_read \\\n  --var openai_api_key=$OPENAI_API_KEY \\\n  --input '{\"directory_path\": \".\", \"task\": \"What files are here?\"}'\n</code></pre>"},{"location":"examples/#pr-reviewer","title":"PR Reviewer","text":"<p>Directory: <code>pr-reviewer/</code></p> <p>Automated GitHub pull request reviewer with human-in-the-loop approval.</p>"},{"location":"examples/#what-youll-learn_3","title":"What You'll Learn","text":"<ul> <li>GitHub MCP integration with authentication</li> <li>Multi-step data-gathering workflows</li> <li>Human approval gates before write operations</li> <li>Building context from multiple API calls</li> <li>Safe patterns for automated actions</li> </ul>"},{"location":"examples/#features-used_3","title":"Features Used","text":"<ul> <li>MCP server with <code>auth</code> block for tokens</li> <li>Capabilities: read (<code>get_pr</code>, <code>list_files</code>) and write (<code>create_review</code>)</li> <li><code>requires_approval = true</code> on write capabilities</li> <li><code>type = \"human_approval\"</code> workflow step</li> <li>Sequential capability calls to build context</li> <li>Passing state between steps</li> </ul>"},{"location":"examples/#run-it_3","title":"Run It","text":"<pre><code>cd examples/pr-reviewer\n\nagentform run review_pr \\\n  --var openai_api_key=$OPENAI_API_KEY \\\n  --var github_personal_access_token=$GITHUB_TOKEN \\\n  --input '{\"owner\": \"your-org\", \"repo\": \"your-repo\", \"pr_number\": 123}'\n</code></pre> <p>The workflow will pause for your approval before submitting the review to GitHub.</p>"},{"location":"examples/#file-structure-convention","title":"File Structure Convention","text":"<p>All examples follow the same file naming convention:</p> <pre><code>example/\n\u251c\u2500\u2500 00-project.af      # Project metadata (agentform block)\n\u251c\u2500\u2500 01-variables.af    # Variable definitions\n\u251c\u2500\u2500 02-providers.af    # Provider and model definitions\n\u251c\u2500\u2500 03-servers.af      # MCP server configuration (if needed)\n\u251c\u2500\u2500 04-capabilities.af # Capability definitions (if needed)\n\u251c\u2500\u2500 05-policies.af     # Policy definitions\n\u251c\u2500\u2500 06-agents.af       # Agent definitions\n\u251c\u2500\u2500 07-workflows.af    # Workflow definitions\n\u251c\u2500\u2500 input.yaml          # Sample input\n\u2514\u2500\u2500 README.md           # Detailed documentation\n</code></pre> <p>Numbered prefixes ensure files are processed in the correct order. References work across files\u2014for example, agents can reference models defined in the providers file.</p>"},{"location":"examples/#next-steps","title":"Next Steps","text":"<p>After exploring these examples:</p> <ol> <li>Create your own agent: Start with <code>simple-agent</code> as a template</li> <li>Add capabilities: Use <code>filesystem-agent</code> as a guide for MCP integration</li> <li>Build complex workflows: Use <code>multi-agent</code> patterns for routing</li> </ol>"},{"location":"guide/","title":"Introduction","text":"<p>Agentform\u2122 allows you to define AI agent systems declaratively using a native schema. Think Infrastructure as Code, but for AI agents.</p>"},{"location":"guide/#why-agentform","title":"Why Agentform?","text":"<p>Most AI agent frameworks require you to write imperative code - managing state, handling retries, wiring up tools. Agentform takes a different approach: describe your agents declaratively in Agentform native schema, and let the runtime engine handle the rest.</p> <pre><code>agent \"reviewer\" {\n  model        = model.gpt4o\n  instructions = \"Review code for security issues\"\n  allow        = [capability.read_file, capability.get_diff]\n  policy       = policy.strict\n}\n</code></pre> <p>The result: Your agent configurations become version-controlled artifacts that are easy to review, share, and reproduce. The native <code>.af</code> format provides type safety, explicit references, and improved editor support.</p>"},{"location":"guide/#key-features","title":"Key Features","text":"<ul> <li>Native Schema: Define agents, workflows, and policies in type-safe <code>.af</code> format.</li> <li>Modules: Terraform-style reusable modules for sharing agent configurations via Git.</li> <li>Multi-Provider: Support for major LLM providers.</li> <li>Multi-Agent: Coordinate multiple specialized agents with conditional routing.</li> <li>Security: Built-in policy enforcement and human-in-the-loop approval.</li> </ul>"},{"location":"guide/core-concepts/","title":"Core Concepts","text":"<p>Agentform is built as a modular system with five core packages, each with a specific responsibility.</p>"},{"location":"guide/core-concepts/#system-overview","title":"System Overview","text":"<pre><code>flowchart TB\n    subgraph User[\"User Layer\"]\n        Agentform[\"\ud83d\udcc4 .af Spec\"]\n        CLI[\"\u26a1 agentform-cli\"]\n        Agentform --&gt; CLI\n    end\n\n    subgraph Core[\"Core Layer\"]\n        SCHEMA[\"\ud83d\udce6 agentform-schema\"]\n        COMPILER[\"\ud83d\udd27 agentform-compiler\"]\n        RUNTIME[\"\ud83d\ude80 agentform-runtime\"]\n        COMPILER --&gt; SCHEMA\n        COMPILER --&gt; RUNTIME\n    end\n\n    subgraph Integration[\"Integration Layer\"]\n        MCP[\"\ud83d\udd0c agentform-mcp\"]\n        LLM[\"\ud83e\udde0 LLM Providers\"]\n        TOOLS[\"\ud83d\udee0\ufe0f External Tools\"]\n    end\n\n    CLI --&gt; COMPILER\n    RUNTIME --&gt; MCP\n    RUNTIME --&gt; LLM\n    MCP --&gt; TOOLS</code></pre>"},{"location":"guide/core-concepts/#core-packages","title":"Core Packages","text":"Package Description agentform-schema Core Pydantic models for specs and Intermediate Representation agentform-compiler Parses <code>.af</code> files, validates specs, and generates IR for the runtime agentform-runtime Workflow execution engine with LLM integration and policy enforcement agentform-mcp MCP (Model Context Protocol) client for connecting to external tool servers agentform-cli Command-line interface for validating and running workflows"},{"location":"guide/core-concepts/#package-details","title":"Package Details","text":""},{"location":"guide/core-concepts/#agentform-schema","title":"agentform-schema","text":"<p>The foundation of Agentform, providing: - Type-safe data models for all Agentform constructs - Intermediate Representation (IR) schema - Validation rules and constraints</p> <p>Key Components: - <code>models.py</code>: Core data models (agents, workflows, policies, etc.) - <code>ir.py</code>: Intermediate Representation schema - <code>version.py</code>: Version management</p>"},{"location":"guide/core-concepts/#agentform-compiler","title":"agentform-compiler","text":"<p>Transforms <code>.af</code> files into executable IR:</p> <ol> <li>Parsing: Converts HCL-like syntax to Abstract Syntax Tree (AST)</li> <li>Normalization: Resolves references and applies defaults</li> <li>Validation: Ensures type safety and constraint satisfaction</li> <li>IR Generation: Produces the Intermediate Representation</li> </ol> <p>Key Components: - <code>agentform_parser.py</code>: Parses <code>.af</code> files - <code>agentform_resolver.py</code>: Resolves references and dependencies - <code>agentform_validator.py</code>: Validates configurations - <code>ir_generator.py</code>: Generates IR from validated AST - <code>agentform_module_loader.py</code>: Loads external modules</p>"},{"location":"guide/core-concepts/#agentform-runtime","title":"agentform-runtime","text":"<p>Executes workflows defined in the IR:</p> <ol> <li>State Management: Tracks workflow execution state</li> <li>Step Execution: Executes individual workflow steps</li> <li>LLM Integration: Calls LLM providers for <code>llm</code> steps</li> <li>Policy Enforcement: Enforces budgets, timeouts, and capability limits</li> <li>Tracing: Records execution traces for debugging</li> </ol> <p>Key Components: - <code>engine.py</code>: Main workflow execution engine - <code>state.py</code>: State management - <code>llm.py</code>: LLM provider integration - <code>policy.py</code>: Policy enforcement - <code>tracing.py</code>: Execution tracing - <code>approval.py</code>: Human-in-the-loop approval</p>"},{"location":"guide/core-concepts/#agentform-mcp","title":"agentform-mcp","text":"<p>Connects Agentform to external tools via Model Context Protocol:</p> <ol> <li>MCP Client: Communicates with MCP servers</li> <li>Capability Mapping: Maps MCP tools to Agentform capabilities</li> <li>Server Management: Manages connections to multiple MCP servers</li> </ol> <p>Key Components: - <code>client.py</code>: MCP client implementation - <code>server.py</code>: Server connection management - <code>types.py</code>: MCP type definitions</p>"},{"location":"guide/core-concepts/#agentform-cli","title":"agentform-cli","text":"<p>Provides the command-line interface:</p> <ol> <li>Command Parsing: Parses CLI arguments</li> <li>Orchestration: Coordinates compiler and runtime</li> <li>Output Formatting: Formats results for display</li> </ol> <p>Key Components: - <code>main.py</code>: CLI entry point - <code>commands/</code>: Individual command implementations   - <code>init.py</code>: Module initialization   - <code>validate.py</code>: Validation command   - <code>compile.py</code>: Compilation command   - <code>run.py</code>: Workflow execution</p>"},{"location":"guide/core-concepts/#data-flow","title":"Data Flow","text":""},{"location":"guide/core-concepts/#compilation-flow","title":"Compilation Flow","text":"<pre><code>.af files\n    \u2193\n[Parser] \u2192 AST\n    \u2193\n[Resolver] \u2192 Resolved AST\n    \u2193\n[Validator] \u2192 Validated AST\n    \u2193\n[IR Generator] \u2192 IR JSON\n</code></pre>"},{"location":"guide/core-concepts/#execution-flow","title":"Execution Flow","text":"<pre><code>IR JSON\n    \u2193\n[Runtime Engine] \u2192 Workflow State\n    \u2193\n[Step Executor] \u2192 Step Results\n    \u2193\n[LLM/MCP Integration] \u2192 External Calls\n    \u2193\n[Policy Enforcement] \u2192 Constraint Checks\n    \u2193\n[Output] \u2192 Final Results\n</code></pre>"},{"location":"guide/core-concepts/#extension-points","title":"Extension Points","text":""},{"location":"guide/core-concepts/#adding-llm-providers","title":"Adding LLM Providers","text":"<ol> <li>Implement provider interface in <code>agentform-runtime</code></li> <li>Add provider type to schema</li> <li>Update compiler to recognize new provider</li> </ol>"},{"location":"guide/core-concepts/#adding-step-types","title":"Adding Step Types","text":"<ol> <li>Define step type in schema</li> <li>Implement step executor in runtime</li> <li>Update compiler validation</li> </ol>"},{"location":"guide/core-concepts/#adding-capabilities","title":"Adding Capabilities","text":"<ol> <li>Connect MCP server via <code>agentform-mcp</code></li> <li>Define capabilities in <code>.af</code> files</li> <li>Use in workflows via <code>call</code> steps</li> </ol>"},{"location":"guide/core-concepts/#design-principles","title":"Design Principles","text":"<ol> <li>Separation of Concerns: Each package has a single, well-defined responsibility</li> <li>Type Safety: Extensive use of Pydantic for runtime type checking</li> <li>Extensibility: Clear interfaces for adding providers, steps, and capabilities</li> <li>Declarative: Users describe what they want, not how to achieve it</li> <li>Observability: Built-in tracing and logging throughout</li> </ol>"},{"location":"guide/getting-started/","title":"Getting Started","text":"<p>This guide will help you get up and running with Agentform in minutes.</p>"},{"location":"guide/getting-started/#installation","title":"Installation","text":""},{"location":"guide/getting-started/#quick-install","title":"Quick Install","text":"<pre><code>pip install agentform-cli\n</code></pre>"},{"location":"guide/getting-started/#verify-installation","title":"Verify Installation","text":"<pre><code>agentform --help\n</code></pre>"},{"location":"guide/getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.12 or higher</li> <li>An API key for at least one LLM provider (OpenAI, Anthropic, etc.)</li> </ul>"},{"location":"guide/getting-started/#your-first-agent","title":"Your First Agent","text":"<p>Let's create a simple agent that can answer questions.</p>"},{"location":"guide/getting-started/#1-set-up-your-api-key","title":"1. Set up your API key","text":"<pre><code>export OPENAI_API_KEY=\"your-openai-key\"\n</code></pre>"},{"location":"guide/getting-started/#2-create-an-agent-spec","title":"2. Create an agent spec","text":"<p>Create a file called <code>my-agent.af</code>:</p> <pre><code>agentform {\n  version = \"0.1\"\n  project = \"my-first-agent\"\n}\n\nvariable \"openai_api_key\" {\n  type        = string\n  description = \"OpenAI API key\"\n  sensitive   = true\n}\n\nprovider \"llm.openai\" \"default\" {\n  api_key = var.openai_api_key\n  default_params {\n    temperature = 0.7\n    max_tokens  = 2000\n  }\n}\n\npolicy \"default\" {\n  budgets {\n    max_cost_usd_per_run = 0.50\n    timeout_seconds      = 60\n  }\n}\n\nmodel \"gpt4o_mini\" {\n  provider = provider.llm.openai.default\n  id       = \"gpt-4o-mini\"\n}\n\nmodel \"gpt35\" {\n  provider = provider.llm.openai.default\n  id       = \"gpt-3.5-turbo\"\n}\n\nagent \"assistant\" {\n  model           = model.gpt4o_mini\n  fallback_models = [model.gpt35]\n  instructions    = \"You are a helpful assistant. Answer questions clearly and concisely.\"\n  policy          = policy.default\n}\n\nworkflow \"ask\" {\n  entry = step.process\n\n  step \"process\" {\n    type  = \"llm\"\n    agent = agent.assistant\n    input { question = input.question }\n    output \"answer\" { from = result.text }\n    next = step.end\n  }\n\n  step \"end\" { type = \"end\" }\n}\n</code></pre>"},{"location":"guide/getting-started/#3-run-it","title":"3. Run it","text":"<p>Validate your spec: <pre><code>agentform validate my-agent.af --var openai_api_key=$OPENAI_API_KEY\n</code></pre></p> <p>Run the workflow: <pre><code>agentform run ask \\\n  --spec my-agent.af \\\n  --var openai_api_key=$OPENAI_API_KEY \\\n  --input '{\"question\": \"What is the capital of France?\"}'\n</code></pre></p> <p>You should see the agent's response!</p>"},{"location":"guide/getting-started/#understanding-the-configuration","title":"Understanding the Configuration","text":"<p>Let's break down what we just created:</p>"},{"location":"guide/getting-started/#agentform-block","title":"<code>agentform</code> block","text":"<p>Defines the project metadata and version.</p>"},{"location":"guide/getting-started/#variable-block","title":"<code>variable</code> block","text":"<p>Declares input variables. The <code>sensitive = true</code> flag ensures the value isn't logged.</p>"},{"location":"guide/getting-started/#provider-block","title":"<code>provider</code> block","text":"<p>Configures the LLM provider (OpenAI in this case) with your API key and default parameters.</p>"},{"location":"guide/getting-started/#policy-block","title":"<code>policy</code> block","text":"<p>Sets budgets and limits for agent execution: - <code>max_cost_usd_per_run</code>: Maximum cost per workflow run - <code>timeout_seconds</code>: Maximum execution time</p>"},{"location":"guide/getting-started/#model-block","title":"<code>model</code> block","text":"<p>Defines specific models from your provider. You can reference multiple models.</p>"},{"location":"guide/getting-started/#agent-block","title":"<code>agent</code> block","text":"<p>Creates an agent with: - A primary model (<code>model.gpt4o_mini</code>) - Fallback models if the primary fails - Instructions that define the agent's behavior - A policy for resource limits</p>"},{"location":"guide/getting-started/#workflow-block","title":"<code>workflow</code> block","text":"<p>Defines the execution flow: - <code>entry</code>: The starting step - <code>step</code>: Individual workflow steps   - <code>type = \"llm\"</code>: Uses an LLM agent   - <code>input</code>: Maps input data   - <code>output</code>: Extracts results   - <code>next</code>: The next step in the flow</p>"},{"location":"guide/getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Explore the Examples to see more complex configurations</li> <li>Learn about Modules for reusable agent configurations</li> <li>Check the CLI Reference for all available commands</li> </ul>"},{"location":"guide/modules/","title":"Agentform Modules","text":"<p>Agentform supports a Terraform-style module system for creating reusable, shareable agent configurations. Modules let you package providers, policies, agents, and workflows together, making it easy for others to use without extensive configuration.</p>"},{"location":"guide/modules/#using-modules","title":"Using Modules","text":""},{"location":"guide/modules/#1-import-a-module-in-your-project","title":"1. Import a module in your project","text":"<p>Create a module block referencing a Git repository:</p> <pre><code>module \"pr-reviewer\" {\n  source  = \"github.com/org/agentform-modules//pr-reviewer\"\n  version = \"v1.0.0\"  // Git branch, tag, or commit\n\n  // Pass required parameters\n  api_key = var.openai_api_key\n  model   = \"gpt-4o\"\n}\n</code></pre> <p>The <code>//</code> syntax separates the repository URL from the subdirectory path (like Terraform).</p>"},{"location":"guide/modules/#2-initialize-your-project","title":"2. Initialize your project","text":"<p>Download all external modules to your local <code>.af/modules/</code> directory:</p> <pre><code>agentform init\n</code></pre> <p>This clones the module repositories locally. You must run <code>agentform init</code> before compiling or running workflows that use external modules.</p>"},{"location":"guide/modules/#3-use-module-resources","title":"3. Use module resources","text":"<p>Resources from modules are namespaced with <code>module.&lt;name&gt;</code>:</p> <pre><code>workflow \"review\" {\n  entry = step.start\n\n  step \"start\" {\n    type  = \"llm\"\n    agent = agent.module.pr-reviewer.reviewer  // Use module's agent\n    next  = step.end\n  }\n\n  step \"end\" { type = \"end\" }\n}\n</code></pre> <p>Or run a module's workflow directly:</p> <pre><code>agentform run module.pr-reviewer.review_workflow .\n</code></pre>"},{"location":"guide/modules/#creating-modules","title":"Creating Modules","text":"<p>A module is simply a directory containing <code>.af</code> files. To create a shareable module:</p>"},{"location":"guide/modules/#1-create-the-module-structure","title":"1. Create the module structure","text":"<pre><code>my-module/\n\u251c\u2500\u2500 00-project.af      # Module metadata\n\u251c\u2500\u2500 01-variables.af    # Input parameters (variables)\n\u251c\u2500\u2500 02-providers.af    # LLM providers\n\u251c\u2500\u2500 03-policies.af     # Policies\n\u251c\u2500\u2500 04-models.af       # Model configurations\n\u251c\u2500\u2500 05-agents.af       # Agent definitions\n\u251c\u2500\u2500 06-workflows.af    # Workflows (optional)\n</code></pre>"},{"location":"guide/modules/#2-define-input-variables","title":"2. Define input variables","text":"<p>Variables without defaults become required parameters:</p> <pre><code>// 01-variables.af\nvariable \"api_key\" {\n  type        = string\n  description = \"API key for the LLM provider\"\n  sensitive   = true\n  // No default = required parameter\n}\n\nvariable \"model\" {\n  type        = string\n  description = \"Model to use\"\n  default     = \"gpt-4o-mini\"  // Has default = optional\n}\n</code></pre>"},{"location":"guide/modules/#3-publish-to-git","title":"3. Publish to Git","text":"<p>Push your module to a Git repository. Users can then reference it:</p> <pre><code>module \"my-module\" {\n  source  = \"github.com/your-org/your-repo//path/to/module\"\n  version = \"main\"\n\n  api_key = var.my_api_key\n}\n</code></pre>"},{"location":"guide/modules/#module-source-formats","title":"Module Source Formats","text":"Format Example GitHub <code>github.com/org/repo</code> GitHub with subdirectory <code>github.com/org/repo//modules/my-module</code> GitLab <code>gitlab.com/org/repo</code> Local path <code>./modules/my-module</code>"},{"location":"guide/modules/#module-caching","title":"Module Caching","text":"<p>Modules are cached in <code>.af/modules/</code> within your project directory:</p> <pre><code>my-project/\n\u251c\u2500\u2500 .af/\n\u2502   \u2514\u2500\u2500 modules/\n\u2502       \u2514\u2500\u2500 github_com_org_repo_abc123/  # Cached module\n\u251c\u2500\u2500 00-project.af\n\u2514\u2500\u2500 01-modules.af\n</code></pre> <p>Add <code>.af/</code> to your <code>.gitignore</code> - these are downloaded dependencies.</p>"},{"location":"guide/modules/#module-best-practices","title":"Module Best Practices","text":"<p>When creating reusable modules, follow these guidelines to make them reliable and easy for others to adopt:</p>"},{"location":"guide/modules/#version-control","title":"Version control","text":"<ul> <li>Commit all module source files (<code>.af</code> and supporting files) to a Git repository.</li> <li>Do not commit the <code>.af/modules/</code> cache directory \u2013 treat it like any other build artifact.</li> <li>Use tags or version branches (e.g., <code>v1.0.0</code>) so users can pin a specific module version.</li> </ul>"},{"location":"guide/modules/#documentation","title":"Documentation","text":"<ul> <li>Include a <code>README.md</code> in the module root that explains:</li> <li>What the module does.</li> <li>Required and optional input variables.</li> <li>Any external dependencies (APIs, credentials, tools).</li> <li>Example usage showing a <code>module</code> block and how to call its workflows or agents.</li> <li>Use <code>description</code> fields on variables, agents, and workflows to make the module self-describing.</li> </ul>"},{"location":"guide/modules/#defaults-and-configuration","title":"Defaults and configuration","text":"<ul> <li>Provide sensible defaults for non-sensitive, non-environment-specific values to make modules easy to adopt.</li> <li>Omit <code>default</code> for values that must be explicitly provided (like API keys) so they are clearly required.</li> <li>Keep variable names stable across versions; if you must change them, document the migration path.</li> </ul>"},{"location":"guide/modules/#testing","title":"Testing","text":"<ul> <li>Create one or more example workflows in the module that exercise the main behavior end to end.</li> <li>Test modules locally before publishing by:</li> <li>Running <code>agentform init</code> against a consuming project.</li> <li>Executing key workflows (<code>agentform run module.&lt;name&gt;.&lt;workflow&gt; .</code>).</li> <li>When possible, pin provider models or critical settings so behavior is consistent across environments.</li> </ul>"},{"location":"guide/modules/#naming-conventions","title":"Naming conventions","text":"<ul> <li>Use clear, descriptive module names (e.g., <code>pr-reviewer</code>, <code>code-audit</code>, <code>data-enrichment</code>).</li> <li>Keep file ordering predictable (e.g., <code>00-project.af</code>, <code>01-variables.af</code>, <code>02-providers.af</code>, \u2026) so users can navigate easily.</li> <li>Avoid breaking changes to exported names (agents, workflows, variables). If a breaking change is unavoidable, publish it under a new major version or a new module name.</li> </ul>"},{"location":"reference/cli/","title":"CLI Reference","text":"<p>Complete reference for the <code>agentform</code> command-line interface.</p>"},{"location":"reference/cli/#commands","title":"Commands","text":""},{"location":"reference/cli/#agentform-init","title":"<code>agentform init</code>","text":"<p>Initialize a project and download external modules.</p> <pre><code>agentform init [directory]\n</code></pre> <p>Description: Downloads all external modules referenced in your <code>.af</code> files to the local <code>.af/modules/</code> directory. You must run this before compiling or running workflows that use external modules.</p> <p>Arguments: - <code>directory</code> (optional): Project directory. Defaults to current directory.</p> <p>Example: <pre><code>agentform init\nagentform init ./my-project\n</code></pre></p>"},{"location":"reference/cli/#agentform-validate","title":"<code>agentform validate</code>","text":"<p>Validate a specification file.</p> <pre><code>agentform validate &lt;spec-file&gt; [options]\n</code></pre> <p>Description: Checks that your Agentform configuration is valid, all references are correct, and all required variables are provided.</p> <p>Arguments: - <code>spec-file</code>: Path to <code>.af</code> spec file or directory containing <code>.af</code> files</p> <p>Options: - <code>-v, --var KEY=VALUE</code>: Set a variable value (can be used multiple times) - <code>--var-file PATH</code>: Load variables from a JSON file</p> <p>Example: <pre><code>agentform validate my-agent.af\nagentform validate . --var openai_api_key=$OPENAI_API_KEY\n</code></pre></p>"},{"location":"reference/cli/#agentform-compile","title":"<code>agentform compile</code>","text":"<p>Compile a specification to Intermediate Representation (IR).</p> <pre><code>agentform compile &lt;spec-file&gt; [options]\n</code></pre> <p>Description: Parses and validates your <code>.af</code> files and generates the Intermediate Representation (IR) JSON. Useful for debugging and understanding how Agentform interprets your configuration.</p> <p>Arguments: - <code>spec-file</code>: Path to <code>.af</code> spec file or directory containing <code>.af</code> files</p> <p>Options: - <code>-o, --output PATH</code>: Write IR to file (default: stdout) - <code>-v, --var KEY=VALUE</code>: Set a variable value (can be used multiple times) - <code>--var-file PATH</code>: Load variables from a JSON file</p> <p>Example: <pre><code>agentform compile my-agent.af\nagentform compile . --output ir.json --var openai_api_key=$OPENAI_API_KEY\n</code></pre></p>"},{"location":"reference/cli/#agentform-run","title":"<code>agentform run</code>","text":"<p>Run a workflow.</p> <pre><code>agentform run &lt;workflow-name&gt; [options]\n</code></pre> <p>Description: Executes a workflow from your Agentform specification. The workflow name can be a simple name (e.g., <code>ask</code>) or a module-qualified name (e.g., <code>module.my-module.workflow_name</code>).</p> <p>Arguments: - <code>workflow-name</code>: Name of the workflow to run</p> <p>Options: - <code>-s, --spec PATH</code>: Path to <code>.af</code> spec file or directory (default: <code>agentform.af</code> or current directory) - <code>-i, --input JSON</code>: Input data as JSON string - <code>-f, --input-file PATH</code>: Input data from JSON file - <code>-o, --output PATH</code>: Write output to file (default: stdout) - <code>-t, --trace PATH</code>: Write execution trace to file - <code>-v, --var KEY=VALUE</code>: Set a variable value (can be used multiple times) - <code>--var-file PATH</code>: Load variables from a JSON file - <code>--verbose</code>: Enable verbose output</p> <p>Example: <pre><code># Simple workflow\nagentform run ask --spec my-agent.af --input '{\"question\": \"Hello!\"}'\n\n# With input file\nagentform run ask --input-file input.json\n\n# With variables\nagentform run ask --var openai_api_key=$OPENAI_API_KEY --input '{\"question\": \"Hello!\"}'\n\n# Save trace for debugging\nagentform run ask --trace trace.json --input '{\"question\": \"Hello!\"}'\n\n# Module workflow\nagentform run module.pr-reviewer.review_workflow --spec .\n</code></pre></p>"},{"location":"reference/cli/#global-options","title":"Global Options","text":"<p>These options are available for all commands:</p> <ul> <li><code>-h, --help</code>: Show help message</li> <li><code>--version</code>: Show version information</li> </ul>"},{"location":"reference/cli/#environment-variables","title":"Environment Variables","text":"<p>You can also set variables using environment variables with the <code>AGENTFORM_VAR_</code> prefix:</p> <pre><code>export AGENTFORM_VAR_openai_api_key=\"your-key\"\nagentform run ask --input '{\"question\": \"Hello!\"}'\n</code></pre>"},{"location":"reference/cli/#exit-codes","title":"Exit Codes","text":"<ul> <li><code>0</code>: Success</li> <li><code>1</code>: General error</li> <li><code>2</code>: Validation error</li> <li><code>3</code>: Compilation error</li> <li><code>4</code>: Runtime error</li> </ul>"},{"location":"reference/cli/#examples","title":"Examples","text":""},{"location":"reference/cli/#complete-workflow","title":"Complete workflow","text":"<pre><code># 1. Initialize project (download modules)\nagentform init\n\n# 2. Validate configuration\nagentform validate . --var openai_api_key=$OPENAI_API_KEY\n\n# 3. Run workflow\nagentform run ask \\\n  --var openai_api_key=$OPENAI_API_KEY \\\n  --input-file input.json \\\n  --output result.json \\\n  --trace trace.json\n</code></pre>"},{"location":"reference/cli/#debugging","title":"Debugging","text":"<pre><code># Compile to see IR\nagentform compile . --output ir.json --var openai_api_key=$OPENAI_API_KEY\n\n# Run with verbose output\nagentform run ask --verbose --input '{\"question\": \"Hello!\"}'\n\n# Save trace for analysis\nagentform run ask --trace trace.json --input '{\"question\": \"Hello!\"}'\n</code></pre>"},{"location":"reference/dsl/","title":"DSL Reference","text":"<p>Agentform uses a declarative schema inspired by HCL (HashiCorp Configuration Language) to define agents, workflows, and policies.</p>"},{"location":"reference/dsl/#block-hierarchy","title":"Block Hierarchy","text":"<ul> <li><code>agentform</code>: Project metadata</li> <li><code>variable</code>: Input parameters</li> <li><code>provider</code>: Configures external services (LLMs)</li> <li><code>server</code>: Configures MCP servers for tools</li> <li><code>policy</code>: Defines execution limits and budgets</li> <li><code>model</code>: Instantiates specific LLM models</li> <li><code>capability</code>: Defines available tools/functions</li> <li><code>agent</code>: Defines AI agents utilizing models and policies</li> <li><code>workflow</code>: Orchestrates steps and execution flow</li> <li><code>module</code>: Imports external configurations</li> </ul>"},{"location":"reference/dsl/#blocks","title":"Blocks","text":""},{"location":"reference/dsl/#agentform","title":"<code>agentform</code>","text":"<p>Defining project metadata.</p> <pre><code>agentform {\n  version = \"0.1\"\n  project = \"my-project\"\n}\n</code></pre> <p>Arguments: - <code>version</code> (string, required): Schema version (e.g., \"0.1\"). - <code>project</code> (string, required): Unique project identifier.</p>"},{"location":"reference/dsl/#variable","title":"<code>variable</code>","text":"<p>Input variables for the configuration.</p> <pre><code>variable \"api_key\" {\n  type        = string\n  description = \"API key\"\n  sensitive   = true\n  default     = \"default-value\"\n}\n</code></pre> <p>Arguments: - <code>type</code> (string, required): Data type (<code>string</code>, <code>number</code>, <code>bool</code>, <code>list</code>, <code>map</code>). - <code>description</code> (string, optional): Documentation for the variable. - <code>default</code> (any, optional): Default value if not provided. - <code>sensitive</code> (bool, optional): If <code>true</code>, value is redacted in logs.</p>"},{"location":"reference/dsl/#provider","title":"<code>provider</code>","text":"<p>Configure an external service provider (e.g., LLM, Vector DB).</p> <pre><code>provider \"llm.openai\" \"default\" {\n  api_key = var.api_key\n  default_params {\n    temperature = 0.7\n  }\n}\n</code></pre> <p>Types: - <code>llm.openai</code> - <code>llm.anthropic</code> - <code>llm.google</code></p> <p>Arguments: - <code>api_key</code> (string, required): Authentication credential. - <code>default_params</code> (block, optional): Default parameters for models using this provider.</p>"},{"location":"reference/dsl/#server","title":"<code>server</code>","text":"<p>Configures a Model Context Protocol (MCP) server for external tools.</p> <pre><code>server \"filesystem\" {\n  command = \"npx\"\n  args    = [\"-y\", \"@modelcontextprotocol/server-filesystem\", \".\"]\n  env = {\n    NODE_ENV = \"production\"\n  }\n}\n</code></pre> <p>Arguments: - <code>command</code> (string, required): Executable to run. - <code>args</code> (list of strings, optional): Arguments to pass to the command. - <code>env</code> (map, optional): Environment variables for the process.</p>"},{"location":"reference/dsl/#policy","title":"<code>policy</code>","text":"<p>Defines execution boundaries, budgets, and safety limits.</p> <pre><code>policy \"standard\" {\n  budgets {\n    max_cost_usd_per_run = 1.0\n    timeout_seconds      = 300\n    max_capability_calls = 50\n  }\n}\n</code></pre> <p>Arguments: - <code>budgets</code> (block):   - <code>max_cost_usd_per_run</code> (number)   - <code>timeout_seconds</code> (number)   - <code>max_steps</code> (number)   - <code>max_capability_calls</code> (number)</p>"},{"location":"reference/dsl/#model","title":"<code>model</code>","text":"<p>Define a model instance referencing a provider.</p> <pre><code>model \"gpt4\" {\n  provider = provider.llm.openai.default\n  id       = \"gpt-4-turbo\"\n}\n</code></pre> <p>Arguments: - <code>provider</code> (reference, required): Reference to a defined provider. - <code>id</code> (string, required): The provider-specific model ID (e.g., <code>gpt-4</code>, <code>claude-3-opus</code>).</p>"},{"location":"reference/dsl/#capability","title":"<code>capability</code>","text":"<p>Defines a tool or function available to agents.</p> <pre><code>capability \"read_file\" {\n  server    = server.filesystem\n  method    = \"tools/call\"\n\n  params {\n    name = \"read_file\"\n  }\n\n  requires_approval = false\n}\n</code></pre> <p>Arguments: - <code>server</code> (reference, required): Reference to an MCP server. - <code>method</code> (string, required): MCP method to call. - <code>requires_approval</code> (bool, optional): If <code>true</code>, human approval is required before execution.</p>"},{"location":"reference/dsl/#agent","title":"<code>agent</code>","text":"<p>Define an AI agent.</p> <pre><code>agent \"helper\" {\n  model           = model.gpt4\n  fallback_models = [model.gpt35]\n  instructions    = \"You are a helpful assistant.\"\n  policy          = policy.standard\n\n  capabilities = [\n    capability.read_file\n  ]\n}\n</code></pre> <p>Arguments: - <code>model</code> (reference, required): Primary model to use. - <code>fallback_models</code> (list of references, optional): Models to try if primary fails. - <code>instructions</code> (string, required): System prompt/persona. - <code>policy</code> (reference, optional): Policy to enforce. - <code>capabilities</code> (list of references, optional): Tools available to the agent.</p>"},{"location":"reference/dsl/#workflow","title":"<code>workflow</code>","text":"<p>Define a multi-step execution flow.</p> <pre><code>workflow \"main\" {\n  entry = step.start\n\n  step \"start\" {\n    type  = \"llm\"\n    agent = agent.helper\n    input { query = input.query }\n    next  = step.end\n  }\n\n  step \"end\" { type = \"end\" }\n}\n</code></pre> <p>Arguments: - <code>entry</code> (reference, required): The starting step. - <code>step</code> (block, multiple): Defines a unit of work.</p>"},{"location":"reference/dsl/#step-types","title":"Step Types","text":"<p>1. <code>llm</code> Invokes an agent. - <code>agent</code> (reference): The agent to call. - <code>input</code> (map): Input variables. - <code>output</code> (map): Map results to variables. - <code>next</code> (reference): Next step.</p> <p>2. <code>tool</code> / <code>call</code> Directly calls a capability. - <code>capability</code> (reference): Tool to execute. - <code>args</code> (map): Arguments for the tool.</p> <p>3. <code>condition</code> Branches logic based on variables. - <code>condition</code> (string): Expression to evaluate. - <code>if_true</code> (reference): Next step if true. - <code>if_false</code> (reference): Next step if false.</p> <p>4. <code>wait</code> / <code>human_approval</code> Pauses execution for user input.</p> <p>5. <code>end</code> Terminates the workflow.</p>"},{"location":"reference/dsl/#module","title":"<code>module</code>","text":"<p>Imports external configurations from a local path or Git repository.</p> <pre><code>module \"review_system\" {\n  source  = \"github.com/agentform/modules//pr-reviewer\"\n  version = \"v1.0.0\"\n\n  api_key = var.api_key\n}\n</code></pre> <p>Arguments: - <code>source</code> (string, required): URI of the module. - <code>version</code> (string, optional): Git tag/branch. - <code>*</code> (any): Inputs required by the module's variables.</p>"}]}